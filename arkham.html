<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>alexcwarren.com</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/custom1.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Arvo|Lobster|Courgette|Indie+Flower|Josefin+Sans|Shadows+Into+Light" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script>
      function getChaosTokensMap() {
        let EASY = 'easy';
        let STD = 'standard';
        let HARD = 'hard';
        let EXP = 'expert';

        let p1 =  '+1';
        let z = '0';
        let m1 = '-1';
        let m2 = '-2';
        let m3 = '-3';
        let m4 = '-4';
        let m5 = '-5';
        let m6 = '-6';
        let m8 = '-8';
        let skull = 'skull';
        let hood = 'hood';
        let tablet = 'tablet';
        let cthulu = 'cthulu';
        let star = 'star';

        let chaosTokensMap = new Map();
        chaosTokensMap.set(EASY, [p1, p1, z, z, z, m1, m1, m1, m2, m2, skull, skull, hood, tablet, cthulu, star]);
        chaosTokensMap.set(STD, [p1, z, z, m1, m1, m1, m2, m2, m3, m4, skull, skull, hood, tablet, cthulu, star]);
        chaosTokensMap.set(HARD, [z, z, z, m1, m1, m2, m2, m3, m3, m4, m5, skull, skull, hood, tablet, cthulu, star]);
        chaosTokensMap.set(EXP, [z, m1, m1, m2, m2, m3, m3, m4, m4, m5, m6, m8, skull, skull, hood, tablet, cthulu, star]);

        return chaosTokensMap;
      }

      function getDifficulty() {
          var difficultySelection = document.getElementById('difficulty');
          var difficultyIndex = difficultySelection.selectedIndex;
          return difficulty = difficultySelection.options[ difficultyIndex ].value;
      }

      function showChaosTokens() {
          let chaosTokensMap = getChaosTokensMap();
          var text = '';

          for(let el of chaosTokensMap.get(getDifficulty())) {
              text += el + ', ';
          }

          log(text.substring(0, text.length - 2) + '<br/>');
      }

      function drawChaosToken() {
        var difficulty = getDifficulty();

        let chaosTokensMap = getChaosTokensMap();
        var chaosTokens = chaosTokensMap.get(difficulty);
        var index = Math.ceil(Math.random() * chaosTokens.length - 1);
        log(chaosTokens[index] + '<br/>');
      }

      function log(message) {
        if(!message) {
          return;
        }

        let text = document.getElementById('log').innerHTML;
        document.getElementById('log').innerHTML = message + text;
      }

      function clearLog() {
        document.getElementById('log').innerHTML = '';
      }

      function legend() {
        var difficulty = getDifficulty();

        let legendRows = document.getElementById('legend').rows;

        let skullRow = legendRows[0].cells;
        let hoodRow = legendRows[1].cells;
        let tabletRow = legendRows[2].cells;

        if(difficulty == 'easy' || difficulty == 'standard') {

          skullRow[1].innerHTML = '-X. X is the number of <strong><em>Ghoul</em></strong> enemies at your location.';
          hoodRow[1].innerHTML = '-1. If you fail, take 1 horror.';
          tabletRow[1].innerHTML = '-2. If there is a <strong><em>Ghoul</em></strong> enemy at your location, take 1 damage.';
        }
        else if(difficulty == 'hard' || difficulty == 'expert') {
          skullRow[1].innerHTML = '-2. If you fail, after this skill test, search the encounter deck and discard pile for a <strong><em>Ghoul</em></strong> enemy, and draw it. Shuffle the encounter deck.';
          hoodRow[1].innerHTML = 'Reveal another token. If you fail, take 2 horror.';
          tabletRow[1].innerHTML = '-4. If there is a <strong><em>Ghoul</em></strong> enemy at your location, take 1 damage and 1 horror.';
        }
      }
    </script>
  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Home</a></li>
            <li><a href="dnd.html">DnD</a></li>
            <li class="active"><a href="arkham.html">Arkham</a></li>
            <li><a href="wedding.html">Wedding</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

      <button onClick="drawChaosToken()">Draw Chaos Token</button>
      <button onClick="showChaosTokens()">Show Chaos Tokens</button>
      <br/><br/>
      Difficulty:
      <select id="difficulty" onChange="legend()">
        <option value="easy">Easy</option>
        <option value="standard">Standard</option>
        <option value="hard">Hard</option>
        <option value="expert">Expert</option>
      </select>
      <br/><br/>
      <table id="legend">
          <tr>
            <td>skull:</td>
            <td id="skull">-X. X is the number of <strong><em>Ghoul</em></strong> enemies at your location.</td>
            <!-- <td><p id="skull">-X. X is the number of <strong><em>Ghoul</em></strong> enemies at your location.</p></td> -->
          </tr>
          <tr>
            <td>hood:</td>
            <td id="hood">-1. If you fail, take 1 horror.</td>
          </tr>
          <tr>
            <td>tablet:</td>
            <td id="tablet">-2. If there is a <strong><em>Ghoul</em></strong> enemy at your location, take 1 damage.</td>
          </tr>
          <tr>
            <td>cthulu:</td>
            <td>Automatic failure.</td>
          </tr>
          <tr>
            <td>star:</td>
            <td>Consult your <strong><em>Investigator Card</em></strong>.</td>
          </tr>
      </table>
      <br/>
      <button onClick="clearLog()">Clear Log</button>
      <br/><br/>
      <p>Log:</p>
      <p id="log"></>

    </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery.min.js"><\/script>')</script>
    <script src="js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
