
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>alexcwarren.com</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/custom1.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Arvo|Lobster|Courgette|Indie+Flower|Josefin+Sans|Shadows+Into+Light" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script>
        function parseInput() {
            var input = document.getElementById('customInput').value;

            var rolls = [];
            for(let arg of input.split(' ')) {
                var rollArg = validateArgument(arg);

                if(rollArg.isValid) {
                    rolls.add(roll(rollArg.numDice, rollArg.dieType, rollArg.mod, false));
                }
                else {
                    rolls.add('Invalid argument: ' + arg);
                }

            }
        }

        function validateArgument(arg) {
            return {
                isValid: true,
                numDice: 1,
                dieType: 4,
                mod: 0
            };
        }

        function roll(numDice, dieType, modifier=0, log=true) {
            var logMessage = numDice + 'd' + dieType;
            if(modifier != 0) {
                if(modifier > 0) {
                    logMessage += '+';
                }

                logMessage += modifier + ': ';
            }

            var sum = 0;
            for(let i = 0; i < numDice; i++) {
                var outcome = Math.ceil( Math.random() * dieType );
                sum += outcome;
                logMessage += outcome + ' ';
            }
            // TODO: handle modifier
            // TODO: devise way to allow Ability Score functionality
        }

        function log(message, newline=true) {
            if(!message) {
                return;
            }

            message += newline ? '<br/>' : '';

            let text = document.getElementById('log').innerHTML;
            document.getElementById('log').innerHTML = message + text;
        }

        function clearLog() {
            document.getElementById('log').innerHTML = '';
        }
    </script>
  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Home</a></li>
            <li class="active"><a href="dnd.html">DnD</a></li>
            <li><a href="arkham.html">Arkham</a></li>
            <li><a href="wedding.html">Wedding</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

      <table>
        <tr>
            <th>#</th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th>Mod</th>
        </tr>
        <tr>
          <td><input class="smallInput" name="numDice" id="numDice" placeholder="1" size=1 /></td>
          <td><button class="d-type" onClick="">d4</button></td>
          <td><button class="d-type" onClick="">d6</button></td>
          <td><button class="d-type" onClick="">d8</button></td>
          <td><button class="d-type" onClick="">d10</button></td>
          <td><button class="d-type" onClick="">d12</button></td>
          <td><button class="d-type" onClick="">d20</button></td>
          <td><button class="d-type" onClick="">d100</button></td>
          <td><input class="smallInput" name="mod" id="mod" placeholder="0" size=1 /></td>
        </tr>
        <tr><td></td></tr>
        <tr><td></td></tr>
        <tr>
            <td colspan="4"><input name="customInput" id="customInput" placeholder="1d20 4d4+4" size=30 /></td>
            <td><button onClick="parseInput()">Roll</button></td>
        </tr>
        <tr><td></td></tr>
        <tr><td></td></tr>
        <tr>
            <td colspan="10">
                <button onClick="">Ability Scores</button>
                <button onClick="">NPC</button>
                <button onClick="">Weather</button>
                <button onClick="">Tavern Name</button>
                <button onClick="">Villain</button>
            </td>
        </tr>
        <tr>
            <td colspan="10">
                <button onClick="">Urban Encounter</button>
            </td>
        </tr>
      </table>
      <br/><br/>
      <button onClick="clearLog()">Clear Log</button>
      <br/><br/>
      <p>Log:</p>
      <p id="log"></>

    </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery.min.js"><\/script>')</script>
    <script src="js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
